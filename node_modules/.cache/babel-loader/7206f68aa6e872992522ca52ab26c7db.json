{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import api from'../../../../Constants/APIEndpoints/APIEndpoints';import Errors from'../../../Errors/Errors';import{Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignOutButton=function SignOutButton(_ref){var setAuthToken=_ref.setAuthToken,setUser=_ref.setUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,_error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(api.base+api.handlers.sessionsMine,{method:\"DELETE\",headers:new Headers({\"Authorization\":localStorage.getItem(\"Authorization\")})});case 3:response=_context.sent;if(!(response.status>=300)){_context.next=10;break;}_context.next=7;return response.text();case 7:_error=_context.sent;setError(_error);return _context.abrupt(\"return\");case 10:localStorage.removeItem(\"Authorization\");setError(\"\");setAuthToken(\"\");setUser(null);case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),className:\"cream-background\",id:\"sign-out\",children:\"sign out\"}),error&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Errors,{error:error,setError:setError})})]});};export default SignOutButton;","map":{"version":3,"sources":["/Users/annaqzhou/INFO/Capstone/verdancy-client/src/Components/Main/Components/SignOutButton/SignOutButton.js"],"names":["React","useState","api","Errors","Button","SignOutButton","setAuthToken","setUser","error","setError","e","preventDefault","fetch","base","handlers","sessionsMine","method","headers","Headers","localStorage","getItem","response","status","text","removeItem"],"mappings":"4eAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,MAAOC,CAAAA,GAAP,KAAgB,iDAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,OAAQC,MAAR,KAAqB,iBAArB,C,6IAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAA+B,IAA5BC,CAAAA,YAA4B,MAA5BA,YAA4B,CAAdC,OAAc,MAAdA,OAAc,CACjD,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eAEA,mBAAO,wCAAE,KAAC,MAAD,EAAQ,OAAO,2FAAE,iBAAOC,CAAP,sIACtBA,CAAC,CAACC,cAAF,GADsB,sBAECC,CAAAA,KAAK,CAACV,GAAG,CAACW,IAAJ,CAAWX,GAAG,CAACY,QAAJ,CAAaC,YAAzB,CAAuC,CAC/DC,MAAM,CAAE,QADuD,CAE/DC,OAAO,CAAE,GAAIC,CAAAA,OAAJ,CAAY,CACjB,gBAAiBC,YAAY,CAACC,OAAb,CAAqB,eAArB,CADA,CAAZ,CAFsD,CAAvC,CAFN,QAEhBC,QAFgB,oBAQlBA,QAAQ,CAACC,MAAT,EAAmB,GARD,iDASED,CAAAA,QAAQ,CAACE,IAAT,EATF,QASZf,MATY,eAUlBC,QAAQ,CAACD,MAAD,CAAR,CAVkB,yCAatBW,YAAY,CAACK,UAAb,CAAwB,eAAxB,EACAf,QAAQ,CAAC,EAAD,CAAR,CACAH,YAAY,CAAC,EAAD,CAAZ,CACAC,OAAO,CAAC,IAAD,CAAP,CAhBsB,uDAAF,+DAAf,CAiBN,SAAS,CAAC,kBAjBJ,CAiBuB,EAAE,CAAC,UAjB1B,sBAAF,CAkBFC,KAAK,eACF,kCACI,KAAC,MAAD,EAAQ,KAAK,CAAEA,KAAf,CAAsB,QAAQ,CAAEC,QAAhC,EADJ,EAnBD,GAAP,CAwBH,CA3BD,CAkCA,cAAeJ,CAAAA,aAAf","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\nimport {Button} from 'react-bootstrap';\n\nconst SignOutButton = ({ setAuthToken, setUser }) => {\n    const [error, setError] = useState(\"\");\n\n    return <><Button onClick={async (e) => {\n        e.preventDefault();\n        const response = await fetch(api.base + api.handlers.sessionsMine, {\n            method: \"DELETE\",\n            headers: new Headers({\n                \"Authorization\": localStorage.getItem(\"Authorization\")\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            setError(error);\n            return;\n        }\n        localStorage.removeItem(\"Authorization\");\n        setError(\"\");\n        setAuthToken(\"\");\n        setUser(null);\n    }} className=\"cream-background\" id=\"sign-out\">sign out</Button>\n        {error &&\n            <div>\n                <Errors error={error} setError={setError} />\n            </div>\n        }\n    </>\n}\n\nSignOutButton.propTypes = {\n    setAuthToken: PropTypes.func.isRequired,\n    setUser: PropTypes.func.isRequired\n}\n\nexport default SignOutButton;\n"]},"metadata":{},"sourceType":"module"}