{"ast":null,"code":"import _classCallCheck from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,useState}from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Breakdown=/*#__PURE__*/function(_React$Component){_inherits(Breakdown,_React$Component);var _super=_createSuper(Breakdown);function Breakdown(props){var _this;_classCallCheck(this,Breakdown);_this=_super.call(this,props);_this.state={data:[]};return _this;}_createClass(Breakdown,[{key:\"drawChart\",value:function drawChart(data){// const data = this.state.data;\nvar margin={top:20,right:60,bottom:40,left:40};var height=700;var width=window.innerWidth-200;var yeet=d3.sort(data,function(d){return d.TotalCO2;});var color=d3.scaleOrdinal().domain(yeet.map(function(d){return d.PlantName;})).range([\"#F4EBC2\",\"#D8C469\",\"#feffa6\",\"#E89B55\"]);var max_CO2=d3.max(data,function(d){return d.TotalCO2;});var x_scale=d3.scaleLinear().domain([0,max_CO2]).range([margin.left+60,width-margin.right-150]);var y_scale=d3.scaleBand().domain(yeet.map(function(d){return d.PlantName;})).range([height-margin.bottom,margin.top]).padding(0.1);var xAxis=function xAxis(g){return g.attr(\"transform\",\"translate(0, 0)\").call(d3.axisBottom(x_scale));};var yAxis=function yAxis(g){return g.attr(\"transform\",\"translate(\".concat(margin.left,\",0)\")).call(d3.axisLeft().scale(y_scale)).style(\"font-size\",\"16pt\");};// const chart = d3.select(\"body\")\nvar chart=d3.select(\"#my-svg\").append(\"svg\").attr(\"width\",width).attr(\"height\",height).style(\"background-color\",\"#679967\");// .attr(\"transform\", \"translate(100, 100)\");\nchart.append('g').call(xAxis).attr(\"transform\",\"translate(100, \".concat(height-25,\")\")).style(\"color\",\"white\");chart.append('g').call(yAxis).attr(\"transform\",\"translate(200,0)\").style(\"color\",\"white\");chart.append(\"g\").selectAll(\"rect\").data(yeet).join(\"rect\").attr(\"fill\",function(d){return color(d.PlantName);}).attr(\"x\",x_scale(0)+100).attr(\"y\",function(d){return y_scale(d.PlantName)+15;}).attr(\"width\",function(d){return x_scale(d.TotalCO2)-x_scale(0);}).attr(\"height\",30);// y_scale.bandwidth()\nchart.selectAll(\"labels\").data(yeet).enter().append(\"text\").attr(\"x\",function(d){return x_scale(d.TotalCO2)+5+100;}).attr(\"y\",function(d){return y_scale(d.PlantName)+35;}).text(function(d){return d.TotalCO2;}).style(\"fill\",\"white\").style(\"font\",\"12pt Sans-serif\");var an=chart.append(\"text\").attr(\"transform\",\"translate(\".concat(width/2+20,\", \").concat(height-50,\")\")).text(\"\").style(\"text-anchor\",\"middle\").style(\"font\",\"20pt Sans-serif\").style(\"fill\",\"white\");an.text(\"gCO2e\");}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// console.log(this.state.data);\nconsole.log(window.innerWidth);fetch(\"https://verdancy.capstone.ischool.uw.edu/v1/UserPlants/\",{method:\"GET\",headers:new Headers({\"Authorization\":localStorage.getItem(\"Authorization\")})}).then(function(res){return res.json();}).then(function(result){_this2.drawChart(result);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"section\",{className:\"green-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"centered emissions-header\",children:\"Plantastic! Let's take a look at the emissions that were saved by each vegetable...\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"my-svg\"})]})});}}]);return Breakdown;}(React.Component);","map":{"version":3,"sources":["/Users/annaqzhou/INFO/Capstone/verdancy-client/src/Components/Emissions/Breakdown.js"],"names":["React","Component","useState","d3","Breakdown","props","state","data","margin","top","right","bottom","left","height","width","window","innerWidth","yeet","sort","d","TotalCO2","color","scaleOrdinal","domain","map","PlantName","range","max_CO2","max","x_scale","scaleLinear","y_scale","scaleBand","padding","xAxis","g","attr","call","axisBottom","yAxis","axisLeft","scale","style","chart","select","append","selectAll","join","enter","text","an","console","log","fetch","method","headers","Headers","localStorage","getItem","then","res","json","result","drawChart"],"mappings":"ooBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAO,GAAKC,CAAAA,EAAZ,KAAoB,IAApB,C,wFAGA,UAAaC,CAAAA,SAAb,kHACI,mBAAYC,KAAZ,CAAmB,2CACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAY,CACRC,IAAI,CAAE,EADE,CAAZ,CAFe,aAKlB,CANL,+CAQI,mBAAUA,IAAV,CAAgB,CACZ;AACA,GAAMC,CAAAA,MAAM,CAAI,CAAEC,GAAG,CAAE,EAAP,CAAWC,KAAK,CAAE,EAAlB,CAAsBC,MAAM,CAAE,EAA9B,CAAkCC,IAAI,CAAE,EAAxC,CAAhB,CAEA,GAAMC,CAAAA,MAAM,CAAG,GAAf,CAEA,GAAMC,CAAAA,KAAK,CAAGC,MAAM,CAACC,UAAP,CAAoB,GAAlC,CAEA,GAAMC,CAAAA,IAAI,CAAGd,EAAE,CAACe,IAAH,CAAQX,IAAR,CAAc,SAAAY,CAAC,QAAIA,CAAAA,CAAC,CAACC,QAAN,EAAf,CAAb,CAEA,GAAMC,CAAAA,KAAK,CAAGlB,EAAE,CAACmB,YAAH,GACTC,MADS,CACFN,IAAI,CAACO,GAAL,CAAS,SAAAL,CAAC,QAAIA,CAAAA,CAAC,CAACM,SAAN,EAAV,CADE,EAETC,KAFS,CAEH,CAAC,SAAD,CAAY,SAAZ,CAAuB,SAAvB,CAAkC,SAAlC,CAFG,CAAd,CAKA,GAAMC,CAAAA,OAAO,CAAGxB,EAAE,CAACyB,GAAH,CAAOrB,IAAP,CAAa,SAAAY,CAAC,QAAIA,CAAAA,CAAC,CAACC,QAAN,EAAd,CAAhB,CAIA,GAAMS,CAAAA,OAAO,CAAG1B,EAAE,CAAC2B,WAAH,GACXP,MADW,CACJ,CAAC,CAAD,CAAII,OAAJ,CADI,EAEXD,KAFW,CAEL,CAAClB,MAAM,CAACI,IAAP,CAAc,EAAf,CAAmBE,KAAK,CAAGN,MAAM,CAACE,KAAf,CAAuB,GAA1C,CAFK,CAAhB,CAIA,GAAMqB,CAAAA,OAAO,CAAG5B,EAAE,CAAC6B,SAAH,GACXT,MADW,CACJN,IAAI,CAACO,GAAL,CAAS,SAAAL,CAAC,QAAIA,CAAAA,CAAC,CAACM,SAAN,EAAV,CADI,EAEXC,KAFW,CAEL,CAACb,MAAM,CAAGL,MAAM,CAACG,MAAjB,CAAyBH,MAAM,CAACC,GAAhC,CAFK,EAGXwB,OAHW,CAGH,GAHG,CAAhB,CAKA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAAAC,CAAC,QAAIA,CAAAA,CAAC,CACfC,IADc,CACT,WADS,oBAEdC,IAFc,CAETlC,EAAE,CAACmC,UAAH,CAAcT,OAAd,CAFS,CAAJ,EAAf,CAIA,GAAMU,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAAAJ,CAAC,QAAIA,CAAAA,CAAC,CACfC,IADc,CACT,WADS,qBACiB5B,MAAM,CAACI,IADxB,SAEdyB,IAFc,CAETlC,EAAE,CAACqC,QAAH,GAAcC,KAAd,CAAoBV,OAApB,CAFS,EAGdW,KAHc,CAGR,WAHQ,CAGK,MAHL,CAAJ,EAAf,CAKA;AACA,GAAMC,CAAAA,KAAK,CAAGxC,EAAE,CAACyC,MAAH,CAAU,SAAV,EACTC,MADS,CACF,KADE,EAETT,IAFS,CAEJ,OAFI,CAEKtB,KAFL,EAGTsB,IAHS,CAGJ,QAHI,CAGMvB,MAHN,EAIT6B,KAJS,CAIH,kBAJG,CAIiB,SAJjB,CAAd,CAKI;AAEJC,KAAK,CAACE,MAAN,CAAa,GAAb,EACKR,IADL,CACUH,KADV,EAEKE,IAFL,CAEU,WAFV,0BAEyCvB,MAAM,CAAC,EAFhD,OAGK6B,KAHL,CAGW,OAHX,CAGoB,OAHpB,EAKAC,KAAK,CAACE,MAAN,CAAa,GAAb,EACKR,IADL,CACUE,KADV,EAEKH,IAFL,CAEU,WAFV,CAEuB,kBAFvB,EAGKM,KAHL,CAGW,OAHX,CAGoB,OAHpB,EAKAC,KAAK,CAACE,MAAN,CAAa,GAAb,EACKC,SADL,CACe,MADf,EAEKvC,IAFL,CAEUU,IAFV,EAGK8B,IAHL,CAGU,MAHV,EAISX,IAJT,CAIc,MAJd,CAIsB,SAACjB,CAAD,QAAOE,CAAAA,KAAK,CAACF,CAAC,CAACM,SAAH,CAAZ,EAJtB,EAKSW,IALT,CAKc,GALd,CAKmBP,OAAO,CAAC,CAAD,CAAP,CAAa,GALhC,EAMSO,IANT,CAMc,GANd,CAMmB,SAAAjB,CAAC,QAAIY,CAAAA,OAAO,CAACZ,CAAC,CAACM,SAAH,CAAP,CAAuB,EAA3B,EANpB,EAOSW,IAPT,CAOc,OAPd,CAOuB,SAAAjB,CAAC,QAAIU,CAAAA,OAAO,CAACV,CAAC,CAACC,QAAH,CAAP,CAAsBS,OAAO,CAAC,CAAD,CAAjC,EAPxB,EAQSO,IART,CAQc,QARd,CAQwB,EARxB,EAQ6B;AAE7BO,KAAK,CAACG,SAAN,CAAgB,QAAhB,EACKvC,IADL,CACUU,IADV,EAEK+B,KAFL,GAGKH,MAHL,CAGY,MAHZ,EAIOT,IAJP,CAIY,GAJZ,CAIiB,SAACjB,CAAD,QAAOU,CAAAA,OAAO,CAACV,CAAC,CAACC,QAAH,CAAP,CAAsB,CAAtB,CAA0B,GAAjC,EAJjB,EAKOgB,IALP,CAKY,GALZ,CAKiB,SAAAjB,CAAC,QAAIY,CAAAA,OAAO,CAACZ,CAAC,CAACM,SAAH,CAAP,CAAuB,EAA3B,EALlB,EAMOwB,IANP,CAMY,SAAA9B,CAAC,QAAIA,CAAAA,CAAC,CAACC,QAAN,EANb,EAOOsB,KAPP,CAOa,MAPb,CAOqB,OAPrB,EAQKA,KARL,CAQW,MARX,CAQmB,iBARnB,EAUA,GAAMQ,CAAAA,EAAE,CAAGP,KAAK,CAACE,MAAN,CAAa,MAAb,EACNT,IADM,CACD,WADC,qBACyBtB,KAAK,CAAG,CAAR,CAAY,EADrC,cAC4CD,MAAM,CAAG,EADrD,OAENoC,IAFM,CAED,EAFC,EAGNP,KAHM,CAGA,aAHA,CAGe,QAHf,EAINA,KAJM,CAIA,MAJA,CAIQ,iBAJR,EAKNA,KALM,CAKA,MALA,CAKQ,OALR,CAAX,CAOEQ,EAAE,CAACD,IAAH,UACL,CA3FL,iCA6FI,4BAAoB,iBAChB;AAEAE,OAAO,CAACC,GAAR,CAAYrC,MAAM,CAACC,UAAnB,EACAqC,KAAK,CAAC,yDAAD,CAA4D,CAC7DC,MAAM,CAAE,KADqD,CAE7DC,OAAO,CAAE,GAAIC,CAAAA,OAAJ,CAAY,CACjB,gBAAiBC,YAAY,CAACC,OAAb,CAAqB,eAArB,CADA,CAAZ,CAFoD,CAA5D,CAAL,CAMKC,IANL,CAMU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EANb,EAOKF,IAPL,CAOU,SAACG,MAAD,CAAY,CACd,MAAI,CAACC,SAAL,CAAeD,MAAf,EACH,CATL,EAUH,CA3GL,sBA6GI,iBAAS,CACL,mBACE,gBAAS,SAAS,CAAC,kBAAnB,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,YAAK,SAAS,CAAC,UAAf,uBACE,WAAI,SAAS,CAAC,2BAAd,iGADF,EADF,cAKI,YAAK,EAAE,CAAC,QAAR,EALJ,GADF,EADF,CAWH,CAzHL,uBAA+B9D,KAAK,CAACC,SAArC","sourcesContent":["import React, {Component, useState} from 'react';\nimport * as d3 from 'd3';\n\n\nexport class Breakdown extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state ={\n            data: []\n        }\n    }\n\n    drawChart(data) {\n        // const data = this.state.data;\n        const margin = ({ top: 20, right: 60, bottom: 40, left: 40 });\n\n        const height = 700;\n\n        const width = window.innerWidth - 200;\n\n        const yeet = d3.sort(data, d => d.TotalCO2);\n\n        const color = d3.scaleOrdinal()\n            .domain(yeet.map(d => d.PlantName))\n            .range([\"#F4EBC2\", \"#D8C469\", \"#feffa6\", \"#E89B55\"]);\n\n\n        const max_CO2 = d3.max(data, d => d.TotalCO2);\n\n\n\n        const x_scale = d3.scaleLinear()\n            .domain([0, max_CO2])\n            .range([margin.left + 60, width - margin.right - 150]);\n\n        const y_scale = d3.scaleBand()\n            .domain(yeet.map(d => d.PlantName))\n            .range([height - margin.bottom, margin.top])\n            .padding(0.1);\n\n        const xAxis = g => g\n            .attr(\"transform\", `translate(0, 0)`)\n            .call(d3.axisBottom(x_scale));\n\n        const yAxis = g => g\n            .attr(\"transform\", `translate(${margin.left},0)`)\n            .call(d3.axisLeft().scale(y_scale))\n            .style(\"font-size\", \"16pt\");\n\n        // const chart = d3.select(\"body\")\n        const chart = d3.select(\"#my-svg\")\n            .append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .style(\"background-color\", \"#679967\");\n            // .attr(\"transform\", \"translate(100, 100)\");\n\n        chart.append('g')\n            .call(xAxis)\n            .attr(\"transform\", `translate(100, ${height-25})`)\n            .style(\"color\", \"white\");\n\n        chart.append('g')\n            .call(yAxis)\n            .attr(\"transform\", \"translate(200,0)\")\n            .style(\"color\", \"white\");\n\n        chart.append(\"g\")\n            .selectAll(\"rect\")\n            .data(yeet)\n            .join(\"rect\")\n                .attr(\"fill\", (d) => color(d.PlantName))\n                .attr(\"x\", x_scale(0) + 100)\n                .attr(\"y\", d => y_scale(d.PlantName) + 15)\n                .attr(\"width\", d => x_scale(d.TotalCO2) - x_scale(0))\n                .attr(\"height\", 30); // y_scale.bandwidth()\n\n        chart.selectAll(\"labels\")\n            .data(yeet)\n            .enter()\n            .append(\"text\")\n              .attr(\"x\", (d) => x_scale(d.TotalCO2) + 5 + 100)\n              .attr(\"y\", d => y_scale(d.PlantName) + 35)\n              .text(d => d.TotalCO2)\n              .style(\"fill\", \"white\")\n            .style(\"font\", \"12pt Sans-serif\");\n\n        const an = chart.append(\"text\")\n            .attr(\"transform\", `translate(${width / 2 + 20}, ${height - 50})`)\n            .text(\"\")\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font\", \"20pt Sans-serif\")\n            .style(\"fill\", \"white\");\n\n          an.text(`gCO2e`);\n    }\n\n    componentDidMount() {\n        // console.log(this.state.data);\n\n        console.log(window.innerWidth);\n        fetch(\"https://verdancy.capstone.ischool.uw.edu/v1/UserPlants/\", {\n            method: \"GET\",\n            headers: new Headers({\n                \"Authorization\": localStorage.getItem(\"Authorization\")\n            })\n        })\n            .then(res => res.json())\n            .then((result) => {\n                this.drawChart(result);\n            });\n    }\n\n    render() {\n        return (\n          <section className=\"green-background\">\n            <div className=\"container\">\n              <div className=\"centered\">\n                <h3 className=\"centered emissions-header\">Plantastic! Let's take a look at the emissions that were saved by each vegetable...</h3>\n              </div>\n                {/* <svg id=\"my-svg\" width={window.innerWidth} height={800}></svg> */}\n                <div id=\"my-svg\"></div>\n            </div>\n          </section>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}