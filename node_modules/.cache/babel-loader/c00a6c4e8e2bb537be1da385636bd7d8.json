{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import SignForm from'../SignForm/SignForm';import api from'../../../../Constants/APIEndpoints/APIEndpoints';import Errors from'../../../Errors/Errors';import PageTypes from'../../../../Constants/PageTypes/PageTypes';import{Container,Row,Col}from'react-bootstrap';/**\n * @class\n * @classdesc SignIn handles the sign in component\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SignIn=/*#__PURE__*/function(_Component){_inherits(SignIn,_Component);var _super=_createSuper(SignIn);function SignIn(props){var _this;_classCallCheck(this,SignIn);_this=_super.call(this,props);_this.setField=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.setError=function(error){_this.setState({error:error});};_this.submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,email,password,sendData,response,error,authToken,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,email=_this$state.email,password=_this$state.password;sendData={email:email,password:password};_context.next=5;return fetch(api.base+api.handlers.sessions,{method:\"POST\",body:JSON.stringify(sendData),headers:new Headers({\"Content-Type\":\"application/json\"})});case 5:response=_context.sent;if(!(response.status>=300)){_context.next=12;break;}_context.next=9;return response.text();case 9:error=_context.sent;_this.setError(error);return _context.abrupt(\"return\");case 12:authToken=response.headers.get(\"Authorization\");localStorage.setItem(\"Authorization\",authToken);_this.setError(\"\");_this.props.setAuthToken(authToken);_context.next=18;return response.json();case 18:user=_context.sent;_this.props.setUser(user);case 20:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={email:\"\",password:\"\",error:\"\"};_this.fields=[{name:\"Email\",key:\"email\"},{name:\"Password\",key:\"password\"}];return _this;}/**\n     * @description setField will set the field for the provided argument\n     */_createClass(SignIn,[{key:\"render\",value:function render(){var values=this.state;var error=this.state.error;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Errors,{error:error,setError:this.setError}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(SignForm,{setField:this.setField,submitForm:this.submitForm,values:values,fields:this.fields})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=564&q=80\",alt:\"dark green leaves\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"centered-text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"welcome to\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"verdancy\"}),/*#__PURE__*/_jsx(\"p\",{children:\"get ready to go green with us!\"})]})]})})]})})]});}}]);return SignIn;}(Component);export default SignIn;","map":{"version":3,"sources":["/Users/annaqzhou/INFO/Capstone/verdancy-client/src/Components/Auth/Components/SignIn/SignIn.js"],"names":["React","Component","SignForm","api","Errors","PageTypes","Container","Row","Col","SignIn","props","setField","e","setState","target","name","value","setError","error","submitForm","preventDefault","state","email","password","sendData","fetch","base","handlers","sessions","method","body","JSON","stringify","headers","Headers","response","status","text","authToken","get","localStorage","setItem","setAuthToken","json","user","setUser","fields","key","values"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SignForm from '../SignForm/SignForm';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\nimport PageTypes from '../../../../Constants/PageTypes/PageTypes';\nimport {Container, Row, Col} from 'react-bootstrap';\n/**\n * @class\n * @classdesc SignIn handles the sign in component\n */\nclass SignIn extends Component {\n    static propTypes = {\n        setPage: PropTypes.func,\n        setAuthToken: PropTypes.func\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: \"\"\n        };\n\n        this.fields = [\n            {\n                name: \"Email\",\n                key: \"email\"\n            },\n            {\n                name: \"Password\",\n                key: \"password\"\n            }];\n    }\n\n    /**\n     * @description setField will set the field for the provided argument\n     */\n    setField = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    /**\n     * @description setError sets the error message\n     */\n    setError = (error) => {\n        this.setState({ error })\n    }\n\n    /**\n     * @description submitForm handles the form submission\n     */\n    submitForm = async (e) => {\n        e.preventDefault();\n        const { email, password } = this.state;\n        const sendData = { email, password };\n        const response = await fetch(api.base + api.handlers.sessions, {\n            method: \"POST\",\n            body: JSON.stringify(sendData),\n            headers: new Headers({\n                \"Content-Type\": \"application/json\"\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            this.setError(error);\n            return;\n        }\n        const authToken = response.headers.get(\"Authorization\")\n        localStorage.setItem(\"Authorization\", authToken);\n        this.setError(\"\");\n        this.props.setAuthToken(authToken);\n        const user = await response.json();\n        this.props.setUser(user);\n    }\n\n    render() {\n        const values = this.state;\n        const { error } = this.state;\n        return <>\n            <Errors error={error} setError={this.setError} />\n            <Container>\n                <Row>\n                    <Col>\n                        <SignForm\n                            setField={this.setField}\n                            submitForm={this.submitForm}\n                            values={values}\n                            fields={this.fields} />\n                    </Col>\n                    <Col>\n                        <Container>\n                            <img src=\"https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=564&q=80\"\n                                alt=\"dark green leaves\" />\n                            <div className=\"centered-text\">\n                                <h4>welcome to</h4>\n                                <h3>verdancy</h3>\n                                <p>get ready to go green with us!</p>\n                            </div>\n                        </Container>\n                    </Col>\n                </Row>\n            </Container>\n            {/* <button onClick={(e) => this.props.setPage(e, PageTypes.signUp)}>Sign up instead</button>\n            <button onClick={(e) => this.props.setPage(e, PageTypes.forgotPassword)}>Forgot password</button> */}\n        </>\n    }\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}